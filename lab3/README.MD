# ğŸ§© LabÂ 02 â€“ Artificial Intelligence  
## THÂ 06 &Â THÂ 07Â Â·Â Backtracking giáº£i BÃ i toÃ¡n **4â€‘Queens** & **8â€‘Queens**

> **File Notebook:** `TH_2.ipynb`  
> **NgÃ´n ngá»¯:** PythonÂ 3.8Â + Â Â |Â Â  **Thuáº­t toÃ¡n:** Backtracking

---

## 1Â Â·Â BÃ i toÃ¡n &Â Má»¥c tiÃªu

| Thá»±c hÃ nh | BÃ n cá» | Sá»‘ quÃ¢n háº­u | Sá»‘ lá»iÂ giáº£i *(ká»³ vá»ng)* |
|-----------|--------|-------------|-------------------------|
| **THÂ 06** | 4Â Ã—Â 4  | 4 | 2 |
| **THÂ 07** | 8Â Ã—Â 8  | 8 | 92 |

Äáº·tâ€¯*N* quÃ¢n háº­u lÃªn bÃ n cá» *NÂ Ã—Â N* sao cho **khÃ´ng quÃ¢n háº­u nÃ o táº¥n cÃ´ng nhau** (hÃ ng, cá»™t, vÃ  hai Ä‘Æ°á»ng chÃ©o).  
Notebook giÃºp báº¡n:

1. Hiá»ƒu quy táº¯c táº¥n cÃ´ng cá»§a quÃ¢n háº­u.  
2. Triá»ƒn khai **thuáº­t toÃ¡n Backtracking** sinh táº¥t cáº£ cáº¥u hÃ¬nh há»£p lá»‡.  
3. Äáº¿m & hiá»ƒn thá»‹ lá»iÂ giáº£i, in tá»aÂ Ä‘á»™ vÃ  minh há»a bÃ n cá».

---

## 2Â Â·Â Táº¡i sao backtracking hoáº¡t Ä‘á»™ng?

### Äáº¡i diá»‡n tráº¡ng thÃ¡i  
- `state = [câ‚€, câ‚, â€¦, câ‚–]` â€“ cá»™t cá»§a quÃ¢n háº­u Ä‘Ã£ Ä‘áº·t á»Ÿ má»—i **hÃ ng**.  
- Sá»‘ hÃ ng Ä‘Ã£ Ä‘áº·t = `len(state)`.

### HÃ m á»©ng viÃªnÂ `get_candidates()`  
á» hÃ ng `r = len(state)` cáº§n thá»­ má»i cá»™t `0â€¦Nâ€‘1`, loáº¡i bá» cá»™t **bá»‹ táº¥n cÃ´ng** bá»Ÿi cÃ¡c quÃ¢n trÆ°á»›c:

```text
â€¢ CÃ¹ng cá»™t:            c == cáµ¢
â€¢ ÄÆ°á»ng chÃ©o chÃ­nh:    c == cáµ¢ + (r - ráµ¢)
â€¢ ÄÆ°á»ng chÃ©o phá»¥:      c == cáµ¢ - (r - ráµ¢)
```

### Thuáº­t toÃ¡n `search()`  

```python
def search(state):
    if len(state) == N:          # Ä‘áº·t Ä‘á»§ N quÃ¢n háº­u
        solutions.append(state); return

    for col in get_candidates(state):
        state.append(col)        # bÆ°á»›c Ä‘i â†˜
        search(state)            # Ä‘á»‡ quy
        state.pop()              # backâ€‘track â†©
```

Nhá» **pruning** á»Ÿ `get_candidates`, khÃ´ng gian tÃ¬m kiáº¿m Ä‘Æ°á»£c cáº¯t giáº£m máº¡nh; vÃ­ dá»¥ 8â€‘Queens chá»‰ cÃ²n ~15k nhÃ¡nh thay vÃ¬ 8â¸ (~16â€¯triá»‡u).

---

## 3Â Â·Â Cáº¥u trÃºc mÃ£

| HÃ m | Vai trÃ² |
|-----|---------|
| `is_valid_state()` | (phiÃªn báº£n demo) kiá»ƒm tra khi Ä‘Ã£ Ä‘áº·t Ä‘á»§ N |
| `get_candidates()` | Sinh cá»™t há»£p lá»‡ káº¿ tiáº¿p |
| `search()` | Backtracking (Ä‘á»‡ quy + backâ€‘track) |
| `solve()` | Bao hÃ m `search`, tráº£ vá» *list* lá»iÂ giáº£i |
| `main` block | Nháº­p N, in báº£ng trá»‘ng, gá»i `solve`, hiá»ƒn thá»‹ káº¿t quáº£ |

---

## 4Â Â·Â HÆ°á»›ng dáº«n sá»­ dá»¥ng

```bash
git clone https://github.com/<user>/AI-Lab02-Queens.git
cd AI-Lab02-Queens
pip install notebook numpy
jupyter notebook TH_2.ipynb
```

1. **Cháº¡y** tá»«ng Ã´ (*ShiftÂ +Â Enter*).  
2. Khi Ä‘Æ°á»£c há»i, nháº­p `N = 4` (THÂ 06) hoáº·c `N = 8` (THÂ 07).  
3. Notebook sáº½:  
   - In **báº£ng cá» trá»‘ng**Â *NÂ Ã—Â N*.  
   - TÃ¬m táº¥t cáº£ lá»iÂ giáº£i (`solve`).  
   - In tá»•ng sá»‘ lá»iÂ giáº£i vÃ  hiá»ƒn thá»‹ tá»«ng lá»iÂ giáº£i vá»›i toáº¡Â Ä‘á»™.

### CLI nhanhÂ (tÃ¹y chá»n)

```bash
python th2_cli.py 8      # in 92 lá»i giáº£i 8â€‘Queens
```

---

## 5Â Â·Â VÃ­ dá»¥ Ä‘áº§u ra

### 4â€‘Queens

```
Tá»•ng sá»‘ lá»i giáº£i tÃ¬m Ä‘Æ°á»£c: 2

ğŸ”¹ Lá»i giáº£i 1: [1, 3, 0, 2]
- Q - -
- - - Q
Q - - -
- - Q -
tá»a Ä‘á»™: [(1,0),(3,1),(0,2),(2,3)]
```

### 8â€‘Queens (hiá»ƒn thá»‹ 2 lá»i giáº£i ngáº«u nhiÃªn)

```
Tá»•ng sá»‘ lá»i giáº£i tÃ¬m Ä‘Æ°á»£c: 92

random 2 lá»i giáº£i ... 1: [0, 6, 3, 5, 7, 1, 4, 2]
Q - - - - - - -
- - - - - - Q -
- - - Q - - - -
- - - - - Q - -
- - - - - - - Q
- Q - - - - - -
- - - - Q - - -
- - Q - - - - -
```

---

## 6Â Â·Â Náº¿u chÆ°Æ¡ng trÃ¬nh â€œbá»‹ gÃ¬â€â€¦

| Dáº¥u hiá»‡u | NguyÃªn nhÃ¢n | CÃ¡ch kháº¯c phá»¥c |
|----------|-------------|----------------|
| **KhÃ´ng dá»«ng** á»Ÿ 8â€‘Queens | `is_valid_state` thiáº¿u check `len(state) == N` | Báº£o Ä‘áº£m tráº£ vá» **True** khi Ä‘á»§ N quÃ¢n háº­u |
| **Lá»i giáº£i > 92** | QuÃªn `state.pop()` khi backâ€‘track | ThÃªm `state.pop()` sau lá»i gá»i Ä‘á»‡ quy |
| **IndexError** á»Ÿ `candidates.discard(col Â± dist)` | `col Â± dist` vÆ°á»£t `0â€¦Nâ€‘1` nhÆ°ng `discard()` an toÃ n â€“ kiá»ƒm tra láº¡i phÃ©p trá»« | Giá»¯ nguyÃªn `discard` (an toÃ n), hoáº·c thÃªm `if 0 <= value < N` |

---

## 7Â Â·Â Má»Ÿ rá»™ng

- **DÃ²ng lá»‡nhÂ `-v`** in chi tiáº¿t quÃ¡ trÃ¬nh backâ€‘track.  
- Lá»c **lá»i giáº£i khÃ¡c biá»‡t hÃ¬nh há»c** (sá»­ dá»¥ng phÃ©p xoay / pháº£n chiáº¿u).  
- Thá»­ **HeuristicÂ Search** (Hillâ€‘Climbing, Minâ€‘Conflicts) cho NÂ lá»›n (NÂ =Â 100+).

---

## 8Â Â·Â License
MIT


